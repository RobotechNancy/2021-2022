/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/competition_screen/CompetitionViewBase.hpp>
#include <touchgfx/Color.hpp>
#include <BitmapDatabase.hpp>
#include <texts/TextKeysAndLanguages.hpp>
#include "stm32f7xx_hal.h"
#include "main.h"

extern UART_HandleTypeDef huart1;

uint32_t color_J = 0xffa502, color_V = 0x8854d0, colorBox;

CompetitionViewBase::CompetitionViewBase() :
    buttonCallback(this, &CompetitionViewBase::buttonCallbackHandler),
    flexButtonCallback(this, &CompetitionViewBase::flexButtonCallbackHandler)
{

    __background.setPosition(0, 0, 272, 480);
    __background.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));

    background.setPosition(0, 0, 272, 480);
    background.setColor(touchgfx::Color::getColorFromRGB(232, 232, 232));

    filigramme.setBitmap(touchgfx::Bitmap(BITMAP_LOGO_SIMPLIFIE_ROBOTECH_ID));
    filigramme.setPosition(0, 0, 272, 480);
    filigramme.setAlpha(30);
    filigramme.setOffset(0, 0);

    boutonAccueil.setBoxWithBorderPosition(0, 0, 43, 43);
    boutonAccueil.setBorderSize(5);
    boutonAccueil.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(0, 102, 153), touchgfx::Color::getColorFromRGB(0, 102, 153), touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(119, 140, 163));
    boutonAccueil.setIconBitmaps(Bitmap(BITMAP_HOME_ID), Bitmap(BITMAP_HOME_ID));
    boutonAccueil.setIconXY(9, 8);
    boutonAccueil.setPosition(228, 0, 43, 43);
    boutonAccueil.setAction(flexButtonCallback);

    boutonRetour.setBoxWithBorderPosition(0, 0, 43, 43);
    boutonRetour.setBorderSize(5);
    boutonRetour.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(0, 98, 102), touchgfx::Color::getColorFromRGB(0, 98, 102), touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(119, 140, 163));
    boutonRetour.setIconBitmaps(Bitmap(BITMAP_RIGHT_ARROW_ID), Bitmap(BITMAP_RIGHT_ARROW_ID));
    boutonRetour.setIconXY(9, 9);
    boutonRetour.setPosition(0, 0, 43, 43);
    boutonRetour.setAction(flexButtonCallback);

    fondCategorie.setPosition(8, 421, 132, 44);
    fondCategorie.setColor(touchgfx::Color::getColorFromRGB(255, 195, 18));
    fondCategorie.setBorderColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    fondCategorie.setBorderSize(3);

    texteCategorie.setXY(26, 433);
    texteCategorie.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    texteCategorie.setLinespacing(0);
    texteCategorie.setRotation(touchgfx::TEXT_ROTATE_180);
    texteCategorie.setTypedText(touchgfx::TypedText(T___SINGLEUSE_4HJ4));

    fondCategorie_1.setPosition(31, 324, 210, 44);
    fondCategorie_1.setColor(touchgfx::Color::getColorFromRGB(238, 90, 36));
    fondCategorie_1.setBorderColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    fondCategorie_1.setBorderSize(3);

    texteCategorie_1.setXY(67, 336);
    texteCategorie_1.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    texteCategorie_1.setLinespacing(0);
    texteCategorie_1.setRotation(touchgfx::TEXT_ROTATE_180);
    texteCategorie_1.setTypedText(touchgfx::TypedText(T___SINGLEUSE_X5SR));

    fondCategorie_2.setPosition(153, 421, 114, 44);
    fondCategorie_2.setColor(touchgfx::Color::getColorFromRGB(18, 203, 196));
    fondCategorie_2.setBorderColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    fondCategorie_2.setBorderSize(3);

    texteCategorie_2.setXY(165, 433);
    texteCategorie_2.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    texteCategorie_2.setLinespacing(0);
    texteCategorie_2.setRotation(touchgfx::TEXT_ROTATE_180);
    texteCategorie_2.setTypedText(touchgfx::TypedText(T___SINGLEUSE_K1R8));

    fondBoutonEquipe.setPosition(46, 196, 188, 88);
    fondBoutonEquipe.setColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    fondBoutonEquipe.setBorderColor(touchgfx::Color::getColorFromRGB(255, 255, 255));
    fondBoutonEquipe.setBorderSize(3);

    validationChoixEquipe.setBoxWithBorderPosition(0, 0, 99, 36);
    validationChoixEquipe.setBorderSize(3);
    validationChoixEquipe.setBoxWithBorderColors(touchgfx::Color::getColorFromRGB(29, 209, 161), touchgfx::Color::getColorFromRGB(29, 209, 161), touchgfx::Color::getColorFromRGB(255, 255, 255), touchgfx::Color::getColorFromRGB(119, 140, 163));
    validationChoixEquipe.setPosition(87, 118, 99, 36);
    validationChoixEquipe.setAction(flexButtonCallback);

    boutonChoixEquipe.setXY(52, 202);
    boutonChoixEquipe.setBitmaps(touchgfx::Bitmap(BITMAP_BOUTON_JAUNE_ID), touchgfx::Bitmap(BITMAP_BOUTON_VIOLET_ID));

    texteCategorie_1_1.setXY(109, 125);
    texteCategorie_1_1.setColor(touchgfx::Color::getColorFromRGB(0, 0, 0));
    texteCategorie_1_1.setLinespacing(0);
    texteCategorie_1_1.setRotation(touchgfx::TEXT_ROTATE_180);
    texteCategorie_1_1.setTypedText(touchgfx::TypedText(T___SINGLEUSE_JVJT));

    add(__background);
    add(background);
    add(filigramme);
    add(boutonAccueil);
    add(boutonRetour);
    add(fondCategorie);
    add(texteCategorie);
    add(fondCategorie_1);
    add(texteCategorie_1);
    add(fondCategorie_2);
    add(texteCategorie_2);
    add(fondBoutonEquipe);
    add(validationChoixEquipe);
    add(boutonChoixEquipe);
    add(texteCategorie_1_1);
}

void CompetitionViewBase::setupScreen()
{

}

void CompetitionViewBase::buttonCallbackHandler(const touchgfx::AbstractButton& src)
{
}

void CompetitionViewBase::flexButtonCallbackHandler(const touchgfx::AbstractButtonContainer& src)
{
    if (&src == &boutonAccueil)
    {
        //retourAccueil
        //When boutonAccueil clicked change screen to Accueil
        //Go to Accueil with screen transition towards West
        application().gotoAccueilScreenSlideTransitionWest();
    }
    else if (&src == &boutonRetour)
    {
        //retourEcranPrecedent
        //When boutonRetour clicked change screen to Accueil
        //Go to Accueil with screen transition towards West
        application().gotoAccueilScreenSlideTransitionWest();
    }
    else if (&src == &validationChoixEquipe)
    {
    	uint8_t trame[1];

    	if(boutonChoixEquipe.getState()){
    		trame[0] = 'V';
    		colorBox = color_V;
    	}else{
    		trame[0] = 'J';
    		colorBox = color_J;
    	}
    	HAL_UART_Transmit(&huart1, trame, 1, HAL_MAX_DELAY);
        //ecranInitialisation
        //When validationChoixEquipe clicked change screen to AffichageScore
        //Go to AffichageScore with screen transition towards East
        application().gotoAffichageScoreScreenSlideTransitionEast();
    }
}
