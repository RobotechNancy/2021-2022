\hypertarget{class_ecran}{}\doxysection{Référence de la classe Ecran}
\label{class_ecran}\index{Ecran@{Ecran}}


Cette classe est utilisée pour la communication entre un ecran STM32\+F7G et une Raspberry\+Pi.  




{\ttfamily \#include $<$ecranlib.\+h$>$}

\doxysubsection*{Fonctions membres publiques}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_ecran_a15869bafa18dfc89f64876cd4f7ddb90}{Ecran}} ()
\begin{DoxyCompactList}\small\item\em Constructeur de la classe \mbox{\hyperlink{class_ecran}{Ecran}}. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_ecran_a4405b236df3f818ec12d3bff0df63856}{$\sim$\+Ecran}} ()
\begin{DoxyCompactList}\small\item\em Destructeur de la classe \mbox{\hyperlink{class_ecran}{Ecran}}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{class_ecran_a883ff9e63313cf711749d418df9f0c02}{open\+Serial\+Connection}} ()
\begin{DoxyCompactList}\small\item\em Nettoyage du buffer et ouverture de la connexion UART entre la Raspberry\+Pi et l\textquotesingle{}écran. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_ecran_a9f6f5d42e7c1362edb7f9b152db6b50f}{close\+Serial\+Connection}} ()
\begin{DoxyCompactList}\small\item\em Nettoyage du buffer et fermeture de la connexion UART entre la Raspberry\+Pi et l\textquotesingle{}écran. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_ecran_a7d189da49f33ecf5ede14f5701f32b50}{send\+Trame}} (\mbox{\hyperlink{struct_trame__t}{Trame\+\_\+t}} trame)
\begin{DoxyCompactList}\small\item\em Fonction permettant d\textquotesingle{}envoyer une trame de message structurée via UART à l\textquotesingle{}écran. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Fonctions membres privées}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_ecran_a7cec3e3dc54a050ab9461e7a534b4828}{delay}} (unsigned int time)
\begin{DoxyCompactList}\small\item\em Fonction permettant de retarder l\textquotesingle{}exécution du code. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Description détaillée}
Cette classe est utilisée pour la communication entre un ecran STM32\+F7G et une Raspberry\+Pi. 

Définition à la ligne \mbox{\hyperlink{ecranlib_8h_source_l00036}{36}} du fichier \mbox{\hyperlink{ecranlib_8h_source}{ecranlib.\+h}}.



\doxysubsection{Documentation des constructeurs et destructeur}
\mbox{\Hypertarget{class_ecran_a15869bafa18dfc89f64876cd4f7ddb90}\label{class_ecran_a15869bafa18dfc89f64876cd4f7ddb90}} 
\index{Ecran@{Ecran}!Ecran@{Ecran}}
\index{Ecran@{Ecran}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{Ecran()}{Ecran()}}
{\footnotesize\ttfamily Ecran\+::\+Ecran (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Constructeur de la classe \mbox{\hyperlink{class_ecran}{Ecran}}. 



Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00021}{21}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00021 \{ \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ecran_a4405b236df3f818ec12d3bff0df63856}\label{class_ecran_a4405b236df3f818ec12d3bff0df63856}} 
\index{Ecran@{Ecran}!````~Ecran@{$\sim$Ecran}}
\index{````~Ecran@{$\sim$Ecran}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{$\sim$Ecran()}{~Ecran()}}
{\footnotesize\ttfamily Ecran\+::$\sim$\+Ecran (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Destructeur de la classe \mbox{\hyperlink{class_ecran}{Ecran}}. 



Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00026}{26}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00026 \{ \}}

\end{DoxyCode}


\doxysubsection{Documentation des fonctions membres}
\mbox{\Hypertarget{class_ecran_a9f6f5d42e7c1362edb7f9b152db6b50f}\label{class_ecran_a9f6f5d42e7c1362edb7f9b152db6b50f}} 
\index{Ecran@{Ecran}!closeSerialConnection@{closeSerialConnection}}
\index{closeSerialConnection@{closeSerialConnection}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{closeSerialConnection()}{closeSerialConnection()}}
{\footnotesize\ttfamily void Ecran\+::close\+Serial\+Connection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Nettoyage du buffer et fermeture de la connexion UART entre la Raspberry\+Pi et l\textquotesingle{}écran. 



Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00061}{61}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00061                                  \{}
\DoxyCodeLine{00062     \mbox{\hyperlink{ecranlib_8cpp_abe56a1928948cbb62cb7654bd976adf9}{serial}}.\mbox{\hyperlink{classserialib_a572dd8d208511ec81d848de72cb05c7a}{flushReceiver}}();}
\DoxyCodeLine{00063     \mbox{\hyperlink{ecranlib_8cpp_ae689d4297d6b1eb1756f3e4020d949b8}{logEcran}} << \textcolor{stringliteral}{"{}(serial) buffer Rx nettoyé avec succès"{}} << \mbox{\hyperlink{loglib_8h_a2d2463ee96be5d0057eb965f6db172f9}{mendl}};}
\DoxyCodeLine{00064     }
\DoxyCodeLine{00065     \mbox{\hyperlink{ecranlib_8cpp_abe56a1928948cbb62cb7654bd976adf9}{serial}}.\mbox{\hyperlink{classserialib_a8a1c8803c8df1a19222d6006328534b8}{closeDevice}}();}
\DoxyCodeLine{00066     \mbox{\hyperlink{ecranlib_8cpp_ae689d4297d6b1eb1756f3e4020d949b8}{logEcran}} << \textcolor{stringliteral}{"{}(serial) connexion série fermée avec succès"{}} << \mbox{\hyperlink{loglib_8h_a2d2463ee96be5d0057eb965f6db172f9}{mendl}};}
\DoxyCodeLine{00067 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ecran_a7cec3e3dc54a050ab9461e7a534b4828}\label{class_ecran_a7cec3e3dc54a050ab9461e7a534b4828}} 
\index{Ecran@{Ecran}!delay@{delay}}
\index{delay@{delay}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{delay()}{delay()}}
{\footnotesize\ttfamily void Ecran\+::delay (\begin{DoxyParamCaption}\item[{unsigned int}]{time }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Fonction permettant de retarder l\textquotesingle{}exécution du code. 


\begin{DoxyParams}{Paramètres}
{\em time} & \+: temps du retard en secondes \\
\hline
\end{DoxyParams}


Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00114}{114}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00114 \{ std::this\_thread::sleep\_for(std::chrono::milliseconds(time*1000)); \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ecran_a883ff9e63313cf711749d418df9f0c02}\label{class_ecran_a883ff9e63313cf711749d418df9f0c02}} 
\index{Ecran@{Ecran}!openSerialConnection@{openSerialConnection}}
\index{openSerialConnection@{openSerialConnection}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{openSerialConnection()}{openSerialConnection()}}
{\footnotesize\ttfamily int Ecran\+::open\+Serial\+Connection (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Nettoyage du buffer et ouverture de la connexion UART entre la Raspberry\+Pi et l\textquotesingle{}écran. 

\begin{DoxyReturn}{Renvoie}
500 succès 

-\/501 port série non trouvé 

-\/502 erreur lors de l\textquotesingle{}ouverture du port série 

-\/503 erreur lors de la récupération des informations du port série 

-\/504 baudrate non reconnu 

-\/505 erreur lors de l\textquotesingle{}écriture de la configuration du port série 

-\/506 erreur lors de l\textquotesingle{}écriture du timeout 

-\/507 databits non reconnus 

-\/508 stopbits non reconnus 

-\/509 parité non reconnue 
\end{DoxyReturn}


Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00045}{45}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00045                                \{}
\DoxyCodeLine{00046     \textcolor{keywordtype}{int} errorOpening;}
\DoxyCodeLine{00047     errorOpening = \mbox{\hyperlink{ecranlib_8cpp_abe56a1928948cbb62cb7654bd976adf9}{serial}}.\mbox{\hyperlink{classserialib_afaed268ce37d18121c4c778041224e5d}{openDevice}}(\mbox{\hyperlink{ecran__define_8h_a7af0d9197e4e5f8fb364e6a3567aeb04}{EC\_SERIAL\_PORT\_DEFAULT}}, \mbox{\hyperlink{ecran__define_8h_a96c7adedda71c4a1eda8033ede594786}{EC\_BAUDRATE\_DEFAULT}}, \mbox{\hyperlink{ecran__define_8h_af7265fb47757823f9161670f4d97580f}{EC\_DATABITS\_DEFAULT}}, \mbox{\hyperlink{ecran__define_8h_ac40f5fd60224d8d45ca0e1e96a2a0ad4}{EC\_PARITY\_DEFAULT}}, \mbox{\hyperlink{ecran__define_8h_aff3346b6d96b58c369aac28f77419ff8}{EC\_STOPBITS\_DEFAULT}});      }
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049     \textcolor{keywordflow}{if} (errorOpening != \mbox{\hyperlink{ecran__define_8h_a14e080035b40cd7eebb19b61e91047a5}{EC\_SER\_E\_SUCCESS}})}
\DoxyCodeLine{00050         \mbox{\hyperlink{ecranlib_8cpp_ae689d4297d6b1eb1756f3e4020d949b8}{logEcran}} << \textcolor{stringliteral}{"{}(serial) /!\(\backslash\)\(\backslash\) erreur "{}} << errorOpening << \textcolor{stringliteral}{"{} : impossible d'ouvrir le port "{}} << \mbox{\hyperlink{ecran__define_8h_a7af0d9197e4e5f8fb364e6a3567aeb04}{EC\_SERIAL\_PORT\_DEFAULT}}  << \textcolor{stringliteral}{"{} -\/ baudrate : "{}} << \mbox{\hyperlink{ecran__define_8h_a96c7adedda71c4a1eda8033ede594786}{EC\_BAUDRATE\_DEFAULT}} << \textcolor{stringliteral}{"{} -\/ parité : "{}} << \mbox{\hyperlink{ecran__define_8h_ac40f5fd60224d8d45ca0e1e96a2a0ad4}{EC\_PARITY\_DEFAULT}} << \mbox{\hyperlink{loglib_8h_a2d2463ee96be5d0057eb965f6db172f9}{mendl}};}
\DoxyCodeLine{00051     \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00052         \mbox{\hyperlink{ecranlib_8cpp_ae689d4297d6b1eb1756f3e4020d949b8}{logEcran}} << \textcolor{stringliteral}{"{}(serial) connexion ouverte avec succès sur le port "{}} << \mbox{\hyperlink{ecran__define_8h_a7af0d9197e4e5f8fb364e6a3567aeb04}{EC\_SERIAL\_PORT\_DEFAULT}} << \textcolor{stringliteral}{"{} -\/ baudrate : "{}} << \mbox{\hyperlink{ecran__define_8h_a96c7adedda71c4a1eda8033ede594786}{EC\_BAUDRATE\_DEFAULT}} << \textcolor{stringliteral}{"{} -\/ parité : "{}} << \mbox{\hyperlink{ecran__define_8h_ac40f5fd60224d8d45ca0e1e96a2a0ad4}{EC\_PARITY\_DEFAULT}} << \mbox{\hyperlink{loglib_8h_a2d2463ee96be5d0057eb965f6db172f9}{mendl}};}
\DoxyCodeLine{00053     \}    }
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055     \textcolor{keywordflow}{return} errorOpening;}
\DoxyCodeLine{00056 \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_ecran_a7d189da49f33ecf5ede14f5701f32b50}\label{class_ecran_a7d189da49f33ecf5ede14f5701f32b50}} 
\index{Ecran@{Ecran}!sendTrame@{sendTrame}}
\index{sendTrame@{sendTrame}!Ecran@{Ecran}}
\doxysubsubsection{\texorpdfstring{sendTrame()}{sendTrame()}}
{\footnotesize\ttfamily int Ecran\+::send\+Trame (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_trame__t}{Trame\+\_\+t}}}]{trame\+\_\+recue }\end{DoxyParamCaption})}



Fonction permettant d\textquotesingle{}envoyer une trame de message structurée via UART à l\textquotesingle{}écran. 


\begin{DoxyParams}{Paramètres}
{\em mode} & \+: le mode de configuration de l\textquotesingle{}écran \\
\hline
{\em categorie} & \+: la catégorie correspondant au mode choisi \\
\hline
{\em sous\+\_\+categorie} & \+: la sous-\/catégorie (spécification) en fonction de la catégorie choisie \\
\hline
{\em value} & \+: les data à transmettre \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Renvoie}
200 succès 

-\/201 taille de la trame incorrecte 

-\/202 data de la trame incorrecte 

-\/203 fin de trame incorrecte 

-\/204 mode choisi pour la trame incorrect ou inconnu 

-\/205 catégorie choisie pour la trame incorrecte ou inconnue 

-\/206 sous-\/catégorie choisie pour la trame incorrecte ou inconnue 
\end{DoxyReturn}


Définition à la ligne \mbox{\hyperlink{ecranlib_8cpp_source_l00083}{83}} du fichier \mbox{\hyperlink{ecranlib_8cpp_source}{ecranlib.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00083                                        \{}
\DoxyCodeLine{00084     \textcolor{keywordtype}{int} length\_trame = 0;}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086     \textcolor{keywordflow}{if}(trame\_recue.\mbox{\hyperlink{struct_trame__t_a24bba0c76c928a314ca2d34f488a03be}{taille}} >= 5)}
\DoxyCodeLine{00087         length\_trame = trame\_recue.\mbox{\hyperlink{struct_trame__t_a24bba0c76c928a314ca2d34f488a03be}{taille}};}
\DoxyCodeLine{00088     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00089         \textcolor{keywordflow}{return} \mbox{\hyperlink{ecran__define_8h_a6aef43d0e0f1d24a4fc8ba30cb07860f}{EC\_TRAME\_E\_SIZE}};}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091     uint8\_t trame[length\_trame];}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093     trame[0] = trame\_recue.\mbox{\hyperlink{struct_trame__t_a4426f3bf120ad4fa2c19c4adf8eda7c7}{mode}};}
\DoxyCodeLine{00094     trame[1] = trame\_recue.\mbox{\hyperlink{struct_trame__t_af1744dff908a0818d8616e176a2c7203}{categorie}};}
\DoxyCodeLine{00095     trame[2] = trame\_recue.\mbox{\hyperlink{struct_trame__t_a0491af8d19228af4efe5bf8a7e334e9f}{sous\_categorie}};}
\DoxyCodeLine{00096 }
\DoxyCodeLine{00097     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{size\_t} i = 0; i < \textcolor{keyword}{sizeof}(trame\_recue.\mbox{\hyperlink{struct_trame__t_adbbdc9b59e16b9e9370860bf77cd6d82}{valeur}})/\textcolor{keyword}{sizeof}(trame\_recue.\mbox{\hyperlink{struct_trame__t_adbbdc9b59e16b9e9370860bf77cd6d82}{valeur}}[0]); i++)\{}
\DoxyCodeLine{00098         trame[i+3] = trame\_recue.\mbox{\hyperlink{struct_trame__t_adbbdc9b59e16b9e9370860bf77cd6d82}{valeur}}[i]; }
\DoxyCodeLine{00099     \}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101     trame[length\_trame-\/2] = \mbox{\hyperlink{ecran__define_8h_a0524117e30f9869f79abe7637e81e0d5}{EC\_FIN\_TRAME\_1}};}
\DoxyCodeLine{00102     trame[length\_trame-\/1] = \mbox{\hyperlink{ecran__define_8h_a1f9ef4d749dde472cddce460efab32b2}{EC\_FIN\_TRAME\_2}};}
\DoxyCodeLine{00103 }
\DoxyCodeLine{00104     \mbox{\hyperlink{ecranlib_8cpp_abe56a1928948cbb62cb7654bd976adf9}{serial}}.\mbox{\hyperlink{classserialib_aa14196b6f422584bf5eebc4ddb71d483}{writeBytes}}(trame, length\_trame);}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     \mbox{\hyperlink{ecranlib_8cpp_ae689d4297d6b1eb1756f3e4020d949b8}{logEcran}} << \textcolor{stringliteral}{"{}(sendMsg) envoi de la trame effectué avec succès"{}} << \mbox{\hyperlink{loglib_8h_a2d2463ee96be5d0057eb965f6db172f9}{mendl}}; }
\DoxyCodeLine{00107     \textcolor{keywordflow}{return} \mbox{\hyperlink{ecran__define_8h_adff06d8a1fb350c6cb8f976301d3d46f}{EC\_TRAME\_E\_SUCCESS}};}
\DoxyCodeLine{00108 \}}

\end{DoxyCode}


La documentation de cette classe a été générée à partir du fichier suivant \+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{ecranlib_8h}{ecranlib.\+h}}\item 
\mbox{\hyperlink{ecranlib_8cpp}{ecranlib.\+cpp}}\end{DoxyCompactItemize}
